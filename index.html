<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pizzeria del Corso ‚Äì Menu</title>
  <meta name="description" content="Pizzeria del Corso ‚Äì menu pizze et entr√©es.">

  <style>
    :root{
      --bg:#0d0b0b;
      --bg-soft:#181414;
      --card:#1f1814;
      --card-soft:#241d18;
      --ink:#f5ede3;
      --muted:#b09a85;
      --accent:#f17a3a;
      --accent-soft:#3a2415;
      --accent-green:#7ddf7a;
      --divider:#3a2c22;
      --radius:18px;
      --shadow:0 14px 30px rgba(0,0,0,.8);
      --maxw:720px;
    }

    *{box-sizing:border-box;margin:0;padding:0;}
    html,body{
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:radial-gradient(circle at top,#2b1d14,var(--bg));
      color:var(--ink);
      line-height:1.6;
      -webkit-font-smoothing:antialiased;
    }
    img{max-width:100%;display:block;}
    a{text-decoration:none;color:inherit;}

    .page{
      max-width:var(--maxw);
      margin:0 auto;
      padding:14px 14px 32px;
    }

    /* HEADER -------------------------------------------------------- */
    header{
      display:flex;
      align-items:center;
      gap:14px;
      padding:8px 4px 4px;
      border-bottom:1px solid var(--divider);
    }
    .logo-wrap{
      width:90px;
      height:90px;
      border-radius:22px;
      overflow:hidden;
      background:#000;
      box-shadow:0 12px 30px rgba(0,0,0,.9);
      flex-shrink:0;
    }
    .brand-block{
      display:flex;
      flex-direction:column;
      gap:3px;
    }
    .brand-title{
      font-weight:750;
      letter-spacing:.15em;
      text-transform:uppercase;
      font-size:.9rem;
    }
    .brand-sub{
      font-size:.8rem;
      color:var(--muted);
    }
    .brand-tag{
      font-size:.75rem;
      color:var(--muted);
      display:flex;
      align-items:center;
      gap:6px;
    }
    .dot{
      width:5px;
      height:5px;
      border-radius:999px;
      background:var(--accent);
      box-shadow:0 0 0 4px rgba(241,122,58,.25);
    }

    /* INTRO --------------------------------------------------------- */
    .intro{
      margin-top:14px;
      background:var(--bg-soft);
      border-radius:var(--radius);
      padding:14px 14px 10px;
      box-shadow:var(--shadow);
      border:1px solid rgba(255,255,255,.05);
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 9px;
      border-radius:999px;
      background:var(--accent-soft);
      color:var(--accent);
      font-size:.75rem;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.12em;
      margin-bottom:6px;
    }
    .badge span{
      font-size:.7rem;
      opacity:.8;
    }
    .intro h1{
      font-size:1.25rem;
      text-transform:uppercase;
      letter-spacing:.14em;
      font-weight:700;
    }
    .intro h1 span{
      color:var(--accent);
    }
    .intro p{
      font-size:.9rem;
      color:var(--muted);
      margin-top:4px;
    }
    .info-row{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-top:8px;
      font-size:.78rem;
      color:var(--muted);
    }
    .info-pill{
      padding:3px 8px;
      border-radius:999px;
      background:rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.06);
    }

    /* CONTROLLI ----------------------------------------------------- */
    .controls{
      margin-top:16px;
      background:var(--bg-soft);
      border-radius:var(--radius);
      padding:10px 12px;
      border:1px solid var(--divider);
    }
    .controls-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      flex-wrap:wrap;
      margin-bottom:4px;
    }
    .controls-title{
      font-size:.85rem;
      text-transform:uppercase;
      letter-spacing:.14em;
      color:#d9c3ae;
    }
    .controls-sub{
      font-size:.78rem;
      color:var(--muted);
      margin-bottom:4px;
    }

    .lang-switch{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-bottom:6px;
    }
    .lang-btn{
      border-radius:999px;
      padding:3px 9px;
      border:1px solid var(--divider);
      background:#15100d;
      color:var(--muted);
      font-size:.75rem;
      text-transform:uppercase;
      letter-spacing:.1em;
      cursor:pointer;
    }
    .lang-btn.active{
      background:var(--accent);
      color:#0f0906;
      border-color:var(--accent);
    }

    .filters{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-bottom:6px;
      margin-top:4px;
    }
    .filter-btn{
      border-radius:999px;
      padding:4px 9px;
      border:1px solid var(--divider);
      font-size:.75rem;
      text-transform:uppercase;
      letter-spacing:.1em;
      background:var(--card-soft);
      color:var(--muted);
      cursor:pointer;
    }
    .filter-btn.active{
      background:var(--accent);
      color:#0f0906;
      border-color:var(--accent);
    }

    .search-box{
      margin-top:4px;
      position:relative;
    }
    .search-box input{
      width:100%;
      border-radius:999px;
      border:1px solid var(--divider);
      padding:6px 10px 6px 28px;
      font-size:.82rem;
      background:#15100d;
      color:var(--ink);
    }
    .search-box input::placeholder{
      color:#7e6860;
    }
    .search-icon{
      position:absolute;
      top:50%;
      left:9px;
      transform:translateY(-50%);
      font-size:.75rem;
      opacity:.7;
    }

    .admin-toggle{
      margin-top:6px;
      font-size:.78rem;
      color:var(--muted);
      display:flex;
      align-items:center;
      gap:4px;
    }
    .admin-toggle input{
      accent-color:var(--accent);
    }

    /* MENU ----------------------------------------------------------- */
    .section-label{
      margin-top:20px;
      font-size:.8rem;
      text-transform:uppercase;
      letter-spacing:.18em;
      color:#a58e7a;
    }
    .divider{
      height:1px;
      background:linear-gradient(90deg,rgba(255,255,255,.24),transparent);
      margin:4px 0 10px;
    }

    .menu-list{
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .item{
      background:var(--card);
      border-radius:var(--radius);
      padding:9px 10px;
      border:1px solid rgba(255,255,255,.04);
      box-shadow:0 10px 22px rgba(0,0,0,.7);
      position:relative;
    }
    .item.unavailable{
      opacity:.35;
    }

    .name-row{
      display:flex;
      justify-content:space-between;
      gap:6px;
      align-items:flex-start;
      font-size:.9rem;
    }
    .name{
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.08em;
    }
    .price{
      font-weight:600;
      color:var(--accent);
      white-space:nowrap;
      font-size:.85rem;
    }
    .desc{
      margin-top:2px;
      font-size:.8rem;
      color:var(--muted);
    }
    .tags{
      margin-top:4px;
      display:flex;
      flex-wrap:wrap;
      gap:4px;
    }
    .tag{
      font-size:.7rem;
      text-transform:uppercase;
      letter-spacing:.1em;
      padding:2px 6px;
      border-radius:999px;
      border:1px solid var(--divider);
      background:#19120e;
      color:#d9c3ae;
    }
    .tag.veg{
      border-color:var(--accent-green);
      color:var(--accent-green);
    }
    .tag.hot{
      border-color:var(--accent);
      color:var(--accent);
    }
    .tag.new{
      border-color:#f1c40f;
      color:#f1c40f;
    }

    .admin-bar{
      margin-top:6px;
      padding-top:4px;
      border-top:1px dashed rgba(255,255,255,.12);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:6px;
      font-size:.75rem;
      color:var(--muted);
    }
    .admin-bar button{
      font-size:.7rem;
      text-transform:uppercase;
      letter-spacing:.1em;
      padding:3px 7px;
      border-radius:999px;
      border:1px solid var(--divider);
      background:#15100d;
      color:var(--ink);
      cursor:pointer;
    }
    .admin-bar button:hover{
      background:#231916;
    }

    footer{
      margin-top:26px;
      padding-top:10px;
      border-top:1px solid var(--divider);
      font-size:.78rem;
      color:var(--muted);
      display:flex;
      flex-direction:column;
      gap:4px;
    }

    @media (min-width:768px){
      .page{padding:20px 0 40px;}
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- HEADER -->
    <header>
      <div class="logo-wrap">
        <!-- Cambia src se il file del logo ha un altro nome -->
        <img src="logo-pizzeria-del-corso.png" alt="Pizzeria del Corso">
      </div>
      <div class="brand-block">
        <div class="brand-title">Pizzeria del Corso</div>
        <div class="brand-sub" id="brandSub"></div>
        <div class="brand-tag">
          <span class="dot"></span>
          <span id="brandTag"></span>
        </div>
      </div>
    </header>

    <!-- INTRO -->
    <section class="intro">
      <div class="badge">
        <span id="badgeMain"></span>
        <span id="badgeSub"></span>
      </div>
      <h1><span id="introTitle"></span></h1>
      <p id="introText"></p>
      <div class="info-row">
        <span class="info-pill" id="info1"></span>
        <span class="info-pill" id="info2"></span>
        <span class="info-pill" id="info3"></span>
      </div>
    </section>

    <!-- CONTROLLI -->
    <section class="controls">
      <div class="controls-header">
        <div class="controls-title" id="controlsTitle"></div>
      </div>
      <p class="controls-sub" id="controlsSub"></p>

      <div class="lang-switch">
        <button class="lang-btn active" data-lang="fr">FR</button>
        <button class="lang-btn" data-lang="it">IT</button>
        <button class="lang-btn" data-lang="en">EN</button>
      </div>

      <div class="filters">
        <button class="filter-btn active" data-filter="all"></button>
        <button class="filter-btn" data-filter="entrees"></button>
        <button class="filter-btn" data-filter="pizze"></button>
        <button class="filter-btn" data-filter="veg"></button>
        <button class="filter-btn" data-filter="hot"></button>
        <button class="filter-btn" data-filter="new"></button>
      </div>

      <div class="search-box">
        <span class="search-icon">üîç</span>
        <input id="searchInput" type="text" placeholder="">
      </div>
      <label class="admin-toggle">
        <input type="checkbox" id="adminToggle">
        <span id="adminLabel"></span>
      </label>
    </section>

    <!-- MENU -->
    <section>
      <div class="section-label" id="sectionEntrees"></div>
      <div class="divider"></div>
      <div id="entreesList" class="menu-list"></div>

      <div class="section-label" style="margin-top:20px;" id="sectionPizze"></div>
      <div class="divider"></div>
      <div id="pizzeList" class="menu-list"></div>
    </section>

    <!-- FOOTER -->
    <footer>
      <div id="footer1"></div>
      <div id="footer2"></div>
      <div id="footer3"></div>
    </footer>
  </div>

  <script>
    // ====== TRADUZIONI UI ==========================================
    const uiTranslations = {
      fr: {
        brandSub: "Four √† bois ¬∑ Pizze de caract√®re",
        brandTag: "Menu digital ¬∑ QR code",
        badgeMain: "MENU DU JOUR",
        badgeSub: "p√¢te longue fermentation",
        introTitle: "Les pizze de la Maison",
        introText: "P√¢te √† longue maturation, ingr√©dients choisis, cuisson au feu de bois. Scannez le QR code au comptoir ou √† table pour retrouver ce menu.",
        info1: "Entr√©es √† partager",
        info2: "Pizze cr√©atives",
        info3: "Options v√©g√©tariennes",
        controlsTitle: "Filtres & recherche",
        controlsSub: "Choisissez une cat√©gorie ou cherchez un ingr√©dient (ex : ‚Äúpistache‚Äù, ‚Äúbufflonne‚Äù).",
        filter_all: "Tout",
        filter_entrees: "Entr√©es",
        filter_pizze: "Pizze",
        filter_veg: "V√©g√©tarien",
        filter_hot: "√âpic√©",
        filter_new: "Nouveaut√©s",
        searchPlaceholder: "Rechercher...",
        adminLabel: "Mode gestion (montrer aussi les pizzas non disponibles)",
        sectionEntrees: "Entr√©es",
        sectionPizze: "Pizze",
        footer1: "Pizzeria del Corso ‚Äì Adresse √† compl√©ter",
        footer2: "Mar‚ÄìSam : 12h‚Äì14h ¬∑ 19h‚Äì22h ¬∑ Dimanche soir ¬∑ Lundi ferm√©",
        footer3: "Sur place ¬∑ √Ä emporter",
        tagVeg: "V√©g√©tarien",
        tagHot: "√âpic√©",
        tagNew: "Nouveau",
        stateAvailable: "Disponible aujourd‚Äôhui",
        stateUnavailable: "Non disponible",
        btnMakeUnavailable: "Mettre non dispo",
        btnMakeAvailable: "Remettre en menu",
        unavailableSuffix: " ¬∑ non disponible"
      },
      it: {
        brandSub: "Forno a legna ¬∑ Pizze di carattere",
        brandTag: "Menu digitale ¬∑ QR code",
        badgeMain: "MENU DEL GIORNO",
        badgeSub: "impasto a lunga fermentazione",
        introTitle: "Le pizze della Casa",
        introText: "Impasto a lunga maturazione, ingredienti scelti e cottura nel forno a legna. Scansiona il QR code al banco o al tavolo per rivedere questo menu.",
        info1: "Antipasti da condividere",
        info2: "Pizze creative",
        info3: "Opzioni vegetariane",
        controlsTitle: "Filtri & ricerca",
        controlsSub: "Scegli una categoria o cerca un ingrediente (es: ‚Äúpistacchio‚Äù, ‚Äúbufala‚Äù).",
        filter_all: "Tutto",
        filter_entrees: "Antipasti",
        filter_pizze: "Pizze",
        filter_veg: "Vegetariane",
        filter_hot: "Piccanti",
        filter_new: "Novit√†",
        searchPlaceholder: "Cerca...",
        adminLabel: "Modalit√† gestione (mostra anche pizze non disponibili)",
        sectionEntrees: "Antipasti",
        sectionPizze: "Pizze",
        footer1: "Pizzeria del Corso ‚Äì Indirizzo da completare",
        footer2: "Mar‚ÄìSab: 12:00‚Äì14:00 ¬∑ 19:00‚Äì22:30 ¬∑ Dom sera ¬∑ Lun chiuso",
        footer3: "In loco ¬∑ Da asporto",
        tagVeg: "Vegetariana",
        tagHot: "Piccante",
        tagNew: "Novit√†",
        stateAvailable: "Disponibile oggi",
        stateUnavailable: "Non disponibile",
        btnMakeUnavailable: "Metti non dispo",
        btnMakeAvailable: "Rimetti in menu",
        unavailableSuffix: " ¬∑ non disponibile"
      },
      en: {
        brandSub: "Wood-fired oven ¬∑ Characterful pizzas",
        brandTag: "Digital menu ¬∑ QR code",
        badgeMain: "TODAY'S MENU",
        badgeSub: "long fermented dough",
        introTitle: "The House Pizzas",
        introText: "Slow-fermented dough, selected ingredients, baked in a wood-fired oven. Scan the QR code at the bar or table to open this menu again.",
        info1: "Sharing starters",
        info2: "Creative pizzas",
        info3: "Vegetarian options",
        controlsTitle: "Filters & search",
        controlsSub: "Choose a category or search for an ingredient (e.g. ‚Äúpistachio‚Äù, ‚Äúbuffalo‚Äù).",
        filter_all: "All",
        filter_entrees: "Starters",
        filter_pizze: "Pizzas",
        filter_veg: "Vegetarian",
        filter_hot: "Spicy",
        filter_new: "New",
        searchPlaceholder: "Search...",
        adminLabel: "Management mode (also show unavailable pizzas)",
        sectionEntrees: "Starters",
        sectionPizze: "Pizzas",
        footer1: "Pizzeria del Corso ‚Äì Address to be completed",
        footer2: "Tue‚ÄìSat: 12:00‚Äì14:00 ¬∑ 19:00‚Äì22:30 ¬∑ Sun evening ¬∑ Mon closed",
        footer3: "Eat-in ¬∑ Takeaway",
        tagVeg: "Vegetarian",
        tagHot: "Spicy",
        tagNew: "New",
        stateAvailable: "Available today",
        stateUnavailable: "Not available",
        btnMakeUnavailable: "Set unavailable",
        btnMakeAvailable: "Back on menu",
        unavailableSuffix: " ¬∑ not available"
      }
    };

    const LANG_KEY = "pdc-lang-v1";
    let currentLang = (localStorage.getItem(LANG_KEY) || "fr");

    // ====== DATI MENU (con testi per lingua) ========================
    const menuItems = [
      {
        id: "entrees-mini-fritte",
        category: "entrees",
        name: {
          fr: "Assortissement de mini pizze fritte",
          it: "Assortimento di mini pizze fritte",
          en: "Assortment of mini fried pizzas"
        },
        description: {
          fr: "Au plaisir du Chef.",
          it: "A piacere dello Chef.",
          en: "According to the Chef‚Äôs inspiration."
        },
        price: "",
        veg: false,
        hot: false,
        tags: ["new"],
        image: ""
      },
      {
        id: "pizza-margherita",
        category: "pizze",
        name: { fr: "Margherita", it: "Margherita", en: "Margherita" },
        description: {
          fr: "Sauce tomate, huile extra vierge d‚Äôolive, mozzarella, parmesan, basilic. Option possible avec croute farcie de ricotta fraiche.",
          it: "Salsa di pomodoro, olio extravergine d‚Äôoliva, mozzarella, parmigiano, basilico. Possibile bordo ripieno di ricotta fresca.",
          en: "Tomato sauce, extra virgin olive oil, mozzarella, parmesan, basil. Optional crust filled with fresh ricotta."
        },
        price: "",
        veg: true,
        hot: false,
        tags: [],
        image: ""
      },
      {
        id: "pizza-mylene",
        category: "pizze",
        name: { fr: "Myl√®ne", it: "Myl√®ne", en: "Myl√®ne" },
        description: {
          fr: "Ricotta au pesto de basilic, courgettes, mozzarella, huile extra vierge d‚Äôolive, prosciutto crudo, basilic et copeaux de pecorino romano.",
          it: "Ricotta al pesto di basilico, zucchine, mozzarella, olio extravergine d‚Äôoliva, prosciutto crudo, basilico e scaglie di pecorino romano.",
          en: "Ricotta with basil pesto, courgettes, mozzarella, extra virgin olive oil, prosciutto crudo, basil and pecorino romano shavings."
        },
        price: "",
        veg: false,
        hot: false,
        tags: [],
        image: ""
      },
      {
        id: "pizza-fleur-bonheur",
        category: "pizze",
        name: { fr: "Fleur & Bonheur", it: "Fleur & Bonheur", en: "Fleur & Bonheur" },
        description: {
          fr: "Fleurs de courgettes en double consistance, mozzarella de bufflonne, basilic et pecorino.",
          it: "Fiori di zucchina in doppia consistenza, mozzarella di bufala, basilico e pecorino.",
          en: "Courgette flowers in two textures, buffalo mozzarella, basil and pecorino."
        },
        price: "",
        veg: true,
        hot: false,
        tags: [],
        image: ""
      },
      {
        id: "pizza-maradona",
        category: "pizze",
        name: { fr: "Maradona", it: "Maradona", en: "Maradona" },
        description: {
          fr: "Mozzarella, saucisse de Savoie, cimes de r√¢pes (friarielli).",
          it: "Mozzarella, salsiccia di Savoia, friarielli.",
          en: "Mozzarella, Savoie sausage, broccoli rabe (friarielli)."
        },
        price: "",
        veg: false,
        hot: false,
        tags: [],
        image: ""
      },
      {
        id: "pizza-brontolona",
        category: "pizze",
        name: { fr: "Brontolona", it: "Brontolona", en: "Brontolona" },
        description: {
          fr: "Pesto de pistache de Bronte*, mozzarella, prosciutto cotto aux herbes et stracciatella de buflonne.",
          it: "Pesto di pistacchio di Bronte*, mozzarella, prosciutto cotto alle erbe e stracciatella di bufala.",
          en: "Bronte pistachio pesto*, mozzarella, herb-cooked ham and buffalo stracciatella."
        },
        price: "",
        veg: false,
        hot: false,
        tags: ["new"],
        image: ""
      },
      {
        id: "pizza-nocina",
        category: "pizze",
        name: { fr: "Nocina", it: "Nocina", en: "Nocina" },
        description: {
          fr: "Cr√®me de noix, mozzarella di bufflonne, gorgonzola √† la cuill√®re, parmesan et basilic.",
          it: "Crema di noci, mozzarella di bufala, gorgonzola a cucchiaio, parmigiano e basilico.",
          en: "Walnut cream, buffalo mozzarella, spoonable gorgonzola, parmesan and basil."
        },
        price: "",
        veg: true,
        hot: false,
        tags: ["new"],
        image: ""
      },
      {
        id: "pizza-tartufona",
        category: "pizze",
        name: { fr: "Tartufona", it: "Tartufona", en: "Tartufona" },
        description: {
          fr: "Cr√®me d‚Äôasperges, mozzarella, guanciale, huile extra vierge d‚Äôolive √† la truffe, basilic et copeaux de parmesan.",
          it: "Crema di asparagi, mozzarella, guanciale, olio extravergine al tartufo, basilico e scaglie di parmigiano.",
          en: "Asparagus cream, mozzarella, guanciale, truffle extra virgin olive oil, basil and parmesan shavings."
        },
        price: "",
        veg: false,
        hot: false,
        tags: [],
        image: ""
      },
      {
        id: "pizza-carbonara",
        category: "pizze",
        name: { fr: "Carbonara", it: "Carbonara", en: "Carbonara" },
        description: {
          fr: "Carbo-creme, mozzarella, guanciale di Norcia, pecorino romano.",
          it: "Crema carbonara, mozzarella, guanciale di Norcia, pecorino romano.",
          en: "Carbonara cream, mozzarella, Norcia guanciale, pecorino romano."
        },
        price: "",
        veg: false,
        hot: false,
        tags: [],
        image: ""
      },
      {
        id: "pizza-belle-bois-dormant",
        category: "pizze",
        name: { fr: "Belle au bois dormant", it: "Belle au bois dormant", en: "Belle au bois dormant" },
        description: {
          fr: "Crema di parmigiano, champignon de saison, gorgonzola doux, mozzarella de bouflonne, basilic.",
          it: "Crema di parmigiano, funghi di stagione, gorgonzola dolce, mozzarella di bufala, basilico.",
          en: "Parmesan cream, seasonal mushrooms, mild gorgonzola, buffalo mozzarella, basil."
        },
        price: "",
        veg: true,
        hot: false,
        tags: [],
        image: ""
      },
      {
        id: "pizza-parmigiana-2",
        category: "pizze",
        name: { fr: "Parmigiana 2.0", it: "Parmigiana 2.0", en: "Parmigiana 2.0" },
        description: {
          fr: "Tomates confites ou pesto rosso, mozzarella, aubergines frittes, copeaux de parmesan et basilic.",
          it: "Pomodori confit o pesto rosso, mozzarella, melanzane fritte, scaglie di parmigiano e basilico.",
          en: "Confit tomatoes or red pesto, mozzarella, fried aubergines, parmesan shavings and basil."
        },
        price: "",
        veg: true,
        hot: false,
        tags: [],
        image: ""
      },
      {
        id: "pizza-mezza-luna",
        category: "pizze",
        name: { fr: "Mezza Luna", it: "Mezza Luna", en: "Mezza Luna" },
        description: {
          fr: "Calzone ricotta, jambon cruit ou cru, mozzarella, parmesan.",
          it: "Calzone con ricotta, prosciutto cotto o crudo, mozzarella, parmigiano.",
          en: "Calzone with ricotta, cooked or cured ham, mozzarella, parmesan."
        },
        price: "",
        veg: false,
        hot: false,
        tags: [],
        image: ""
      }
    ];

    // ====== DISPONIBILIT√Ä ===========================================
    const AVAIL_KEY = "pdc-availability-dark-i18n-v1";
    let availability = {};
    let adminMode = false;
    let currentFilter = "all";
    let searchTerm = "";

    const entreesList = document.getElementById("entreesList");
    const pizzeList = document.getElementById("pizzeList");
    const filterButtons = document.querySelectorAll(".filter-btn");
    const searchInput = document.getElementById("searchInput");
    const adminToggle = document.getElementById("adminToggle");
    const langButtons = document.querySelectorAll(".lang-btn");

    function loadAvailability(){
      try{
        const raw = localStorage.getItem(AVAIL_KEY);
        if(raw){
          availability = JSON.parse(raw);
        }
      }catch(e){
        availability = {};
      }
    }

    function saveAvailability(){
      try{
        localStorage.setItem(AVAIL_KEY, JSON.stringify(availability));
      }catch(e){}
    }

    function isAvailable(item){
      if(Object.prototype.hasOwnProperty.call(availability,item.id)){
        return !!availability[item.id];
      }
      return true;
    }

    // ====== APPLICA TRADUZIONI UI ==================================
    function applyTranslations(){
      const t = uiTranslations[currentLang] || uiTranslations.fr;

      document.getElementById("brandSub").textContent = t.brandSub;
      document.getElementById("brandTag").textContent = t.brandTag;
      document.getElementById("badgeMain").textContent = t.badgeMain;
      document.getElementById("badgeSub").textContent = t.badgeSub;
      document.getElementById("introTitle").textContent = t.introTitle;
      document.getElementById("introText").textContent = t.introText;
      document.getElementById("info1").textContent = t.info1;
      document.getElementById("info2").textContent = t.info2;
      document.getElementById("info3").textContent = t.info3;
      document.getElementById("controlsTitle").textContent = t.controlsTitle;
      document.getElementById("controlsSub").textContent = t.controlsSub;
      document.getElementById("adminLabel").textContent = t.adminLabel;
      document.getElementById("sectionEntrees").textContent = t.sectionEntrees;
      document.getElementById("sectionPizze").textContent = t.sectionPizze;
      document.getElementById("footer1").textContent = t.footer1;
      document.getElementById("footer2").textContent = t.footer2;
      document.getElementById("footer3").textContent = t.footer3;
      searchInput.placeholder = t.searchPlaceholder;

      // Filtri
      filterButtons.forEach(btn=>{
        const key = btn.dataset.filter;
        const labelKey = "filter_"+key;
        btn.textContent = t[labelKey] || key;
      });

      // Bottoni lingua attivi
      langButtons.forEach(b=>{
        b.classList.toggle("active", b.dataset.lang === currentLang);
      });
    }

    // ====== FILTRI & RICERCA =======================================
    filterButtons.forEach(btn=>{
      btn.addEventListener("click",()=>{
        filterButtons.forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");
        currentFilter = btn.dataset.filter;
        renderMenu();
      });
    });

    searchInput.addEventListener("input",e=>{
      searchTerm = e.target.value.toLowerCase();
      renderMenu();
    });

    adminToggle.addEventListener("change",e=>{
      adminMode = e.target.checked;
      renderMenu();
    });

    langButtons.forEach(btn=>{
      btn.addEventListener("click",()=>{
        currentLang = btn.dataset.lang;
        localStorage.setItem(LANG_KEY,currentLang);
        applyTranslations();
        renderMenu();
      });
    });

    function passFilter(item){
      if(currentFilter==="all") return true;
      if(currentFilter==="entrees") return item.category==="entrees";
      if(currentFilter==="pizze") return item.category==="pizze";
      if(currentFilter==="veg") return item.veg;
      if(currentFilter==="hot") return item.hot;
      if(currentFilter==="new") return item.tags && item.tags.includes("new");
      return true;
    }

    function passSearch(item){
      if(!searchTerm) return true;
      const name = item.name[currentLang] || item.name.fr;
      const desc = item.description[currentLang] || item.description.fr;
      const text = (name + " " + desc).toLowerCase();
      return text.includes(searchTerm);
    }

    // ====== RENDER ==================================================
    function createItemCard(item){
      const t = uiTranslations[currentLang] || uiTranslations.fr;
      const available = isAvailable(item);
      if(!adminMode && !available) return null;  // nascosta ai clienti

      const el = document.createElement("article");
      el.className = "item";
      if(!available) el.classList.add("unavailable");

      const nameRow = document.createElement("div");
      nameRow.className = "name-row";

      const nameEl = document.createElement("div");
      nameEl.className = "name";
      nameEl.textContent = item.name[currentLang] || item.name.fr;
      if(!available){
        nameEl.textContent += t.unavailableSuffix;
      }

      const priceEl = document.createElement("div");
      priceEl.className = "price";
      priceEl.textContent = item.price || "";

      nameRow.appendChild(nameEl);
      nameRow.appendChild(priceEl);

      const desc = document.createElement("div");
      desc.className = "desc";
      desc.textContent = item.description[currentLang] || item.description.fr;

      const tagsRow = document.createElement("div");
      tagsRow.className = "tags";

      if(item.veg){
        const tv = document.createElement("span");
        tv.className = "tag veg";
        tv.textContent = t.tagVeg;
        tagsRow.appendChild(tv);
      }
      if(item.hot){
        const th = document.createElement("span");
        th.className = "tag hot";
        th.textContent = t.tagHot;
        tagsRow.appendChild(th);
      }
      if(item.tags && item.tags.includes("new")){
        const tn = document.createElement("span");
        tn.className = "tag new";
        tn.textContent = t.tagNew;
        tagsRow.appendChild(tn);
      }

      el.appendChild(nameRow);
      el.appendChild(desc);
      if(tagsRow.children.length) el.appendChild(tagsRow);

      if(adminMode){
        const adminBar = document.createElement("div");
        adminBar.className = "admin-bar";

        const state = document.createElement("span");
        state.textContent = available ? t.stateAvailable : t.stateUnavailable;

        const btn = document.createElement("button");
        btn.textContent = available ? t.btnMakeUnavailable : t.btnMakeAvailable;

        btn.addEventListener("click",()=>{
          availability[item.id] = !available;
          saveAvailability();
          renderMenu();
        });

        adminBar.appendChild(state);
        adminBar.appendChild(btn);
        el.appendChild(adminBar);
      }

      return el;
    }

    function renderMenu(){
      entreesList.innerHTML = "";
      pizzeList.innerHTML = "";

      menuItems
        .filter(item => passFilter(item) && passSearch(item))
        .forEach(item=>{
          const card = createItemCard(item);
          if(!card) return;
          if(item.category==="entrees") entreesList.appendChild(card);
          if(item.category==="pizze") pizzeList.appendChild(card);
        });
    }

    // ====== INIT ====================================================
    loadAvailability();
    applyTranslations();
    renderMenu();
  </script>
</body>
</html>
